{% extends 'navbar.html' %}
{% block head%}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js" integrity="sha256-yr4fRk/GU1ehYJPAs8P4JlTgu0Hdsp4ZKrx8bDEDC3I=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
<script src="{{url_for('static', filename='index.js')}}"></script>
<link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='index.css') }}" />
{% endblock %}
{% block body%}
    <!--
    <div id="items">
        <p id="mess"></p>
        <input type="text" id="input">
        <button id="send">Send</button>
    </div>
    <button class="room">Vanila</button>
    <button class="room">Chocolate</button>
    -->
<div class="modal fade" id="modalAddRoom" tabindex="-1" role="dialog" aria-labelledby="new-room-aria" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Add room</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <label data-error="wrong" data-success="right" >Room name</label>
          <input class="form-control" id="new-room-input">
        </div>
        <div class="md-form mb-4">
          <label data-error="wrong" data-success="right">Your password</label>
          <input type="password" id="room-password" class="form-control">  
          <input type="checkbox" class="form-check-input" id="room-password-check" checked>
          <label class="form-check-label">With password</label>
        </div>
      </div>
      <div class="modal-footer d-flex justify-content-center">
        <button class="btn btn-default" id="new-room">Create</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="password-validation" tabindex="-1" role="dialog" aria-labelledby="room-password-val-aria" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Enter the room password</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <label data-error="wrong" data-success="right">Room password</label>
          <input class="form-control" id="room-password-val">
        </div>
      </div>
      <div class="modal-footer d-flex justify-content-center">
        <button class="btn btn-default" id="room-password-btn">Enter</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="modalAddFriend" tabindex="-1" role="dialog" aria-labelledby="add-friend-val-aria" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Add a friend</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <label data-error="wrong" data-success="right">the Friend's username (Watch for caps.)</label>
          <input class="form-control" id="friend-username-val">
        </div>
      </div>
      <div class="modal-footer d-flex justify-content-center">
        <button class="btn btn-default" id="friend-btn">Enter</button>
      </div>
    </div>
  </div>
</div>

<div class="text-center">
    <div class="card purple lighten-4 chat-room">
        <div class="card-body">
          <div class="row px-2">
            <div class="col-md-6 col-xl-8 pr-md-4 px-lg-auto px-0">
      
              <div class="chat-message">
                
                <ul class="list-unstyled chat">
                    <div id="messages">
                    </div>
                    <br>
                  <li class="white">
                    <div class="form-group basic-textarea">
                      <input type="text" dir="auto" class="form-control pl-2 my-0" id="input" rows="3" placeholder="Type your message here..."></input>
                    </div>
                  </li>
                  <button type="button" class="btn btn-deep-purple btn-rounded btn-sm waves-effect waves-light float-right" id="send">Send</button>
                </ul>
      
              </div>
      
            </div>
            <div class="col-md-6 col-xl-4 px-0">
      
              <h6 class="font-weight-bold mb-3 text-center text-lg-left">Friends(GMT time)</h6>
              <div class="white z-depth-1 px-3 pt-3 pb-0 friend-div">
                <ul class="list-unstyled friend-list">
                  {% for i in range(user_friends|length) %}
                  <div id="friend-{{user_friends[i]}}">
                    <li class="p-2">
                      <a class="d-flex justify-content-between">
                        <div class="text-small">
                          <button type="button" class="btn btn-primary friend-username">{{user_friends[i]}}</button>
                          <p class="last-message text-muted">{{last_message[i]}}</p>
                        </div>
                        <div class="chat-footer">
                          {% if last_message_time_with_friends[i] is defined %} <!--could be a server msg-->
                            <p class="text-smaller text-muted mb-0 date">â €{{last_message_time_with_friends[i]}}</p> <!--should be the same length-->
                          {% endif %}
                          <span class="text-muted float-right"><i class="fas fa-mail-reply" aria-hidden="true"></i></span>
                        </div>
                      </a>
                    </li>
                  </div>
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
{% endblock %}